<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Nav Bug Test</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        body { font-family: sans-serif; padding: 20px; }
        #test-output { margin-top: 20px; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; }
        .failure { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Mobile Navigation Bug Test</h1>
    <p>This page tests for the "double toggle" bug on the mobile navigation menu.</p>
    <p>To run the test, open this file in a browser. The results will be displayed below.</p>

    <div id="header-placeholder"></div>

    <div id="test-output">Running test...</div>

    <script src="js/script.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // The main script loads the header, we need to wait for it.
            // A simple timeout should be sufficient for this test case.
            setTimeout(runTest, 500);
        });

        function runTest() {
            const navToggle = document.getElementById('nav-toggle');
            const navLabel = document.querySelector('label.nav-toggle[for="nav-toggle"]');
            const output = document.getElementById('test-output');

            if (!navToggle || !navLabel) {
                output.textContent = 'Test failed: Could not find nav elements.';
                output.className = 'failure';
                return;
            }

            // To test the "before" state, comment out the fix in js/script.js
            // To test the "after" state, ensure the fix is applied in js/script.js

            // Simulate a user click
            navLabel.click();

            // Check the state after the click
            setTimeout(() => {
                const finalState = navToggle.checked;

                if (finalState) {
                    output.textContent = 'Test PASSED: Navigation toggle is checked (menu is open).';
                    output.className = 'success';
                } else {
                    output.textContent = 'Test FAILED: Navigation toggle is NOT checked (menu failed to open). This confirms the "double toggle" bug.';
                    output.className = 'failure';
                }
            }, 100);
        }
    </script>
</body>
</html>
